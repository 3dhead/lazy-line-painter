!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lazy-line-painter",[],e):"object"==typeof exports?exports["lazy-line-painter"]=e():t["lazy-line-painter"]=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={easeLinear:function(t,e,n,i){return n*t/i+e},easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,e,n,i){return n-this.easeOutBounce(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){return t<i/2?.5*this.easeInBounce(2*t,0,n,i)+e:.5*this.easeOutBounce(2*t-i,0,n,i)+.5*n+e}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={on:function(t,e){this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},this._eventEmitterCallbacks[t]=this._eventEmitterCallbacks[t]||[],this._eventEmitterCallbacks[t].push(e)}};i.addListener=i.on,i.off=function(t,e){if(this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},t in this._eventEmitterCallbacks){var n=this._eventEmitterCallbacks[t].indexOf(e);n<0||this._eventEmitterCallbacks[t].splice(n,1)}},i.removeListener=i.off,i.emit=function(t,e){if(this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},t in this._eventEmitterCallbacks){var n=!0,i=!1,r=void 0;try{for(var s,o=this._eventEmitterCallbacks[t][Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;if("function"!=typeof a)return;a(e)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},i.trigger=i.emit;var r=i;e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n(1)),r=s(n(0));function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.config=Object.assign({paths:[],strokeWidth:null,strokeDash:null,strokeColor:null,strokeOverColor:null,strokeCap:null,strokeJoin:null,strokeOpacity:null,delay:0,ease:null,drawSequential:!1,speedMultiplier:1,reverse:!1,paused:!1,progress:0,longestDuration:0,playhead:0},n,{}),Object.assign(this,i.default,{}),this.__raf=null;var r,s=this.el.querySelectorAll("[data-llp-id]");for(r=0;r<s.length;r++)this.config.paths.push({el:s[r]});this.className="lazy-line-painter",this.el.classList.add(this.className),this._parseDataAttrs();var o=this.config.delay+this._getTotalDuration(this.config.paths),a=this.config.delay+this._getLongestDuration(this.config.paths);this.config.totalDuration=this.config.drawSequential?o:a,this.config.totalDuration*=this.config.speedMultiplier,this._setupPaths(),this.resize()}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"paint",value:function(){var t=this;this.erase(),this.__raf=requestAnimationFrame(function(e){t._paint(e)}),this.emit("start")}},{key:"pause",value:function(){this.config.paused||(this.config.paused=!0,cancelAnimationFrame(this.__raf))}},{key:"resume",value:function(){var t=this;this.config.paused&&(requestAnimationFrame(function(e){t.adjustStartTime(e)}),this.config.paused=!1)}},{key:"erase",value:function(){this.config.startTime=null,this.config.elapsedTime=null,cancelAnimationFrame(this.__raf),this.config.onStrokeCompleteDone=!1,this.config.paused=!1;for(var t=0;t<this.config.paths.length;t++){var e=this.config.paths[t];e.el.style.strokeDashoffset=e.length,e.onStrokeCompleteDone=!1,e.onStrokeStartDone=!1}}},{key:"destroy",value:function(){this.config=null,this.el.classList.remove(this.className),this.el.remove(),this.el=null}},{key:"set",value:function(t){this.config.progress=t,this._updatePaths()}},{key:"get",value:function(){return this.config}},{key:"resize",value:function(){this.config.offset=this.el.getBoundingClientRect();for(var t=0;t<this.config.paths.length;t++){var e=this.config.paths[t];e.el.getBoundingClientRect(),e.positions=this._getPathPoints(e.el,e.length),this._updatePosition(e)}}},{key:"_parseDataAttrs",value:function(){for(var t=0;t<this.config.paths.length;t++){var e=this.config.paths[t];e.id=e.el.dataset.llpId,e.delay=Number(e.el.dataset.llpDelay)||0,e.duration=Number(e.el.dataset.llpDuration)||0,e.reverse=Number(e.el.dataset.llpReverse)||!1,e.ease=Number(e.el.dataset.llpEase)||null,e.strokeDash=e.el.dataset.llpStrokeDash||null,this._setStyleAttrs(e)}}},{key:"_setStyleAttrs",value:function(t){t.strokeColor=t.el.dataset.llpStrokeColor||this.config.strokeColor,t.strokeColor&&t.el.setAttributeNS(null,"stroke",t.strokeColor),t.strokeOpacity=t.el.dataset.llpStrokeOpacity||this.config.strokeOpacity,t.strokeOpacity&&t.el.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),t.strokeWidth=t.el.dataset.llpStrokeWidth||this.config.strokeWidth,t.strokeWidth&&t.el.setAttributeNS(null,"stroke-width",t.strokeWidth),t.strokeCap=t.el.dataset.llpStrokeCap||this.config.strokeCap,t.strokeCap&&t.el.setAttributeNS(null,"stroke-linecap",t.strokeCap),t.strokeJoin=t.el.dataset.llpStrokeJoin||this.config.strokeJoin,t.strokeJoin&&t.el.setAttributeNS(null,"stroke-linejoin",t.strokeJoin)}},{key:"_setupPaths",value:function(){for(var t=this.config.reverse?this.config.totalDuration:0,e=0;e<this.config.paths.length;e++){var n=this.config.paths[e];n.progress=0,n.index=e,n.length=this._getPathLength(n.el),n.positions=this._getPathPoints(n.el,n.length),n.el.style.strokeDasharray=this._getStrokeDashArray(n,n.length),n.el.style.strokeDashoffset=n.length,n.el.getBoundingClientRect(),n.onStrokeStartDone=!1,n.onStrokeCompleteDone=!1;var i=void 0,r=n.duration/this.config.totalDuration;i=this.config.reverse?(t-=n.duration)/this.config.totalDuration:(t=this.config.drawSequential?this.config.playhead+this.config.delay:n.delay+this.config.delay)/this.config.totalDuration,n.startTime=t,n.startProgress=i,n.durationProgress=r,this.config.playhead+=n.duration+n.delay}}},{key:"adjustStartTime",value:function(t){var e=this;this.config.startTime=t-this.config.elapsedTime,requestAnimationFrame(function(t){e._paint(t)})}},{key:"_paint",value:function(t){var e=this;this.config&&(this.config.startTime||(this.config.startTime=t),this.emit("update"),this.config.elapsedTime=t-this.config.startTime,this.config.progress=this._getProgress(this.config.totalDuration,this.config.startTime,this.config.elapsedTime,this.config.ease),this._updatePaths(),this.config.progress<1?this.__raf=requestAnimationFrame(function(t){e._paint(t)}):this.emit("complete"))}},{key:"_updatePaths",value:function(){for(var t=0;t<this.config.paths.length;t++){var e=this.config.paths[t],n=this._getElapsedProgress(e);e.progress=this._getProgress(1,0,n,e.ease),this._setLine(e),this._updatePosition(e),this._updateStrokeCallbacks(e)}}},{key:"_getElapsedProgress",value:function(t){var e;return this.config.progress>t.startProgress&&this.config.progress<t.startProgress+t.durationProgress?e=(this.config.progress-t.startProgress)/t.durationProgress:this.config.progress>=t.startProgress+t.durationProgress?e=1:this.config.progress<=t.startProgress&&(e=0),e}},{key:"_getProgress",value:function(t,e,n,i){var s;return n>0&&n<t?s=i?r.default[i](n,0,1,t):n/t:n>=t?s=1:n<=e&&(s=0),s}},{key:"_setLine",value:function(t){var e=t.el,n=t.progress*t.length;this.config.reverse||t.reverse?e.style.strokeDashoffset=-t.length+n:e.style.strokeDashoffset=t.length-n}},{key:"_updateStrokeCallbacks",value:function(t){1===t.progress?t.onStrokeCompleteDone||(t.onStrokeCompleteDone=!0,this.emit("complete:"+t.id,t),this.emit("complete:all",t)):t.progress>1e-5&&(t.onStrokeStartDone||(this.emit("start:"+t.id,t),this.emit("start:all",t),t.onStrokeStartDone=!0),this.emit("update:"+t.id,t),this.emit("update:all",t))}},{key:"_updatePosition",value:function(t){var e=Math.round(t.progress*(t.length-1)),n=t.positions[e];t.position={x:this.config.offset.left+n.x,y:this.config.offset.top+n.y}}},{key:"_getTotalDuration",value:function(t){for(var e=0,n=0;n<t.length;n++){var i=t[n].delay||0;e+=t[n].duration+i}return e}},{key:"_getLongestDuration",value:function(t){for(var e=0,n=0;n<t.length;n++){var i=t[n].delay||0;t[n].duration+i>e&&(e=t[n].duration+i)}return e}},{key:"_getPathLength",value:function(t){return Math.ceil(t.getTotalLength())}},{key:"_getPathPoints",value:function(t,e){for(var n=[],i=0;i<e;i++){var r=t.getPointAtLength(i);n.push({x:r.x,y:r.y})}return n}},{key:"_getSVGElement",value:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttributeNS(null,"viewBox",t),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e}},{key:"_getStrokeDashArray",value:function(t,e){return t.strokeDash?this._getStrokeDashString(t.strokeDash,e):this.config.strokeDash?this._getStrokeDashString(this.config.strokeDash,e):e+" "+e}},{key:"_getStrokeDashString",value:function(t,e){for(var n,i,r="",s=t.split(","),o=0,a=s.length-1;a>=0;a--)o+=Number(s[a]);i=e-(n=Math.floor(e/o))*o;for(var u=n-1;u>=0;u--)r+=t+", ";return(r+i+", "+e).split(",").join("px,")+"px"}}]),t}();window.LazyLinePainter=a;var u=a;e.default=u,t.exports=e.default}])});
//# sourceMappingURL=lazy-line-painter-1.9.0.min.js.map